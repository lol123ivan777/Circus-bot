/**
 * src/handlers/about.js
 */

exports.handleAbout = async (bot, input, msgIdOverride) => {
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º chatId
  const chatId =
    input?.message?.chat?.id ||
    input?.chat?.id ||
    input?.from?.id;

  if (!chatId) {
    console.error('ABOUT ERROR: chatId –Ω–µ –Ω–∞–π–¥–µ–Ω');
    return;
  }

  // –°–∞–º —Ç–µ–∫—Å—Ç
  const text =
    'üé™ *–¶–∏—Ä–∫ –ù–∏–∫—É–ª–∏–Ω–∞ ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏ —Ç—Ä–∞–¥–∏—Ü–∏–∏* üé™\n\n' +
    '*üìç –ê–¥—Ä–µ—Å:* –ú–æ—Å–∫–≤–∞, –¶–≤–µ—Ç–Ω–æ–π –±—É–ª—å–≤–∞—Ä, –¥–æ–º 13\n' +
    '*üìû –¢–µ–ª–µ—Ñ–æ–Ω:* +7 (495) 628-8349\n\n' +
    '*üèõ –û–¥–∏–Ω –∏–∑ —Å—Ç–∞—Ä–µ–π—à–∏—Ö —Ü–∏—Ä–∫–æ–≤ –†–æ—Å—Å–∏–∏.* –ó–¥–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –≤ 1880 –≥–æ–¥—É. ' +
    '–ü–µ—Ä–≤—ã–π —Å–ø–µ–∫—Ç–∞–∫–ª—å –ø—Ä–æ—à—ë–ª 20 –æ–∫—Ç—è–±—Ä—è —Ç–æ–≥–æ –∂–µ –≥–æ–¥–∞. –° —Ç–µ—Ö –ø–æ—Ä —Ü–∏—Ä–∫ –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª —Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª –¥—É—Ö –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ —Ü–∏—Ä–∫–æ–≤–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞.\n\n' +
    '*üåü –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –∞—Ä—Ç–∏—Å—Ç—ã.* –°—Ä–µ–¥–∏ –∑–≤—ë–∑–¥ ‚Äî –∫–ª–æ—É–Ω—ã, –¥—Ä–µ—Å—Å–∏—Ä–æ–≤—â–∏–∫–∏ –∏ –∞—Ä—Ç–∏—Å—Ç—ã —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞. ' +
    '–¶–∏—Ä–∫ —Å—Ç–∞–ª –¥–æ–º–æ–º –≤–µ–ª–∏–∫–æ–≥–æ –Æ—Ä–∏—è –ù–∏–∫—É–ª–∏–Ω–∞.\n\n' +
    '*üé≠ –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥—ë—Ç–µ:* —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º, –∞—Ä—Ç–∏—Å—Ç–æ–≤, –Ω–æ–≤–æ—Å—Ç–∏ –∏ —É–¥–æ–±–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.\n\n' +
    '–í—ã–±–∏—Ä–∞–π—Ç–µ —Ä–∞–∑–¥–µ–ª üëá';

  const keyboard = {
    inline_keyboard: [
      [{ text: '‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é', callback_data: 'back_to_menu' }]
    ]
  };

  const msgId =
    msgIdOverride ||
    input?.message?.message_id ||
    null;

  // –ï—Å–ª–∏ –±—ã–ª callback ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
  if (input?.message && msgId) {
    return bot.editMessageText(text, {
      chat_id: chatId,
      message_id: msgId,
      parse_mode: 'Markdown',
      reply_markup: keyboard
    });
  }

  // fallback –µ—Å–ª–∏ msgId –Ω–µ—Ç (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π)
  return bot.sendMessage(chatId, text, {
    parse_mode: 'Markdown',
    reply_markup: keyboard
  });
};